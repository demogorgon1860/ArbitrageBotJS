# üöÄ Polygon Arbitrage Bot - Production Ready

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –±–æ—Ç –¥–ª—è —Å–µ—Ç–∏ Polygon** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ on-chain –¥–∞–Ω–Ω—ã–º–∏, –≥–æ—Ç–æ–≤—ã–π –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## ‚úÖ **–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- ‚úÖ **–¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã** —Å DEX —á–µ—Ä–µ–∑ `getAmountsOut()`
- ‚úÖ **–ë–µ–∑ —Å–∏–º—É–ª—è—Ü–∏–π** - —Ç–æ–ª—å–∫–æ on-chain –¥–∞–Ω–Ω—ã–µ  
- ‚úÖ **Production-grade –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å error handling
- ‚úÖ **RPC failover —Å–∏—Å—Ç–µ–º–∞** —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- ‚úÖ **Anti-spam Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- ‚úÖ **Comprehensive –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ **Smart contract –¥–ª—è —É—Ç–∏–ª–∏—Ç**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
polygon-arbitrage-bot/
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îî‚îÄ‚îÄ Arb.sol                    # Utility –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ trade.js                   # üéØ –û–°–ù–û–í–ù–û–ô –ë–û–¢
‚îÇ   ‚îú‚îÄ‚îÄ priceFetcher.js           # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ timeCalculator.js         # –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞  
‚îÇ   ‚îú‚îÄ‚îÄ telegram.js               # Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.js                 # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ utils.js                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test.js                   # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ validate-config.js        # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ deploy.js                 # –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ contract-interaction.js   # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ polygon.json              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ DEX
‚îú‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
‚îú‚îÄ‚îÄ cache/                        # –ö—ç—à —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ deployments/                  # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ø–ª–æ—è—Ö
‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ hardhat.config.js            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Hardhat
‚îú‚îÄ‚îÄ package.json                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ Dockerfile                   # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose
‚îú‚îÄ‚îÄ PRODUCTION.md                # –ì–∏–¥ –ø–æ production –¥–µ–ø–ª–æ—é
‚îî‚îÄ‚îÄ README.md                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
git clone <repository-url>
cd polygon-arbitrage-bot
npm install

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
npm run compile
```

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```bash
cp .env.example .env
```

**–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ RPC –¥–ª—è failover
POLYGON_RPC_1=https://polygon-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY
POLYGON_RPC_2=https://polygon.infura.io/v3/YOUR_INFURA_KEY  
POLYGON_RPC_3=https://rpc.ankr.com/polygon

# API –∫–ª—é—á–∏ –¥–ª—è premium –¥–æ—Å—Ç—É–ø–∞
ALCHEMY_API_KEY=your_alchemy_key
INFURA_API_KEY=your_infura_key

# Telegram –±–æ—Ç (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
MIN_BASIS_POINTS_PER_TRADE=50
CHECK_INTERVAL_MS=30000
INPUT_AMOUNT_USD=1000
```

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

```bash
# –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
npm run validate

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
npm run test
```

### 4. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**

```bash
# üéØ –û–°–ù–û–í–ù–û–ô –ó–ê–ü–£–°–ö
npm start

# –ò–ª–∏ —á–µ—Ä–µ–∑ Hardhat —Å–µ—Ç—å
npm run hardhat
```

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç

### **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω**

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¢–û–õ–¨–ö–û —Ä–µ–∞–ª—å–Ω—ã–µ on-chain –¥–∞–Ω–Ω—ã–µ**:

```javascript
// V2 DEX (SushiSwap, QuickSwap)
const amounts = await router.getAmountsOut(inputAmount, [tokenA, tokenB, tokenC]);

// V3 DEX (Uniswap)  
const amountOut = await quoter.quoteExactInputSingle(tokenIn, tokenOut, fee, amountIn, 0);
```

### **–ü–æ–∏—Å–∫ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞**

1. ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã —Å–æ –≤—Å–µ—Ö DEX
2. ‚úÖ –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ü–µ–Ω—ã –ø–æ –≤—Å–µ–º —Ç–æ—Ä–≥–æ–≤—ã–º –ø—É—Ç—è–º
3. ‚úÖ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç spread –≤ basis points
4. ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ slippage
5. ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

- üì± –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram —Ç–æ–ª—å–∫–æ **–Ω–æ–≤—ã–µ** –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîÑ Cooldown —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ç–∏–≤ —Å–ø–∞–º–∞
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: —Ü–µ–Ω—ã, –ø—É—Ç–∏, –ø—Ä–∏–±—ã–ª—å, –≤—Ä–µ–º—è
- üö® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Å—Ç–∞—Ç—É—Å–µ

## üè™ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ DEX

| DEX | –¢–∏–ø | Router | –°—Ç–∞—Ç—É—Å |
|-----|-----|---------|--------|
| **Uniswap V3** | V3 | `0xE59...564` | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |
| **SushiSwap** | V2 | `0x1b0...506` | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |  
| **QuickSwap** | V2 | `0xa5E...ff` | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω |

## ü™ô –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ–∫–µ–Ω—ã

| Token | Address | Decimals | Paths |
|-------|---------|----------|--------|
| **WETH** | `0x7ce...619` | 18 | 4 paths |
| **WBTC** | `0x1BF...FD6` | 8 | 4 paths |
| **USDC** | `0x279...174` | 6 | 4 paths |
| **USDT** | `0xc21...8eF` | 6 | 3 paths |
| **LINK** | `0x53E...d39` | 18 | 5 paths |
| **AAVE** | `0xD6D...90B` | 18 | 5 paths |
| **CRV** | `0x172...0AF` | 18 | 5 paths |

## üìä –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
üöÄ Arbitrage Opportunity Found! ‚ö°

üí∞ Token: LINK
üìà Spread: 127 bps (1.27%)

üè™ Buy: SushiSwap
üíµ Price: $14.235

üè¶ Sell: Uniswap V3  
üíµ Price: $14.416

üí∏ Input Amount: $1000
üéØ Theoretical Profit: $12.70
üíé Adjusted Profit: $8.45

‚ö° Risk Level: üü† Medium-High
üé≤ Success Probability: 78.3%
‚è±Ô∏è Execution Time: 8.4s
‚è∞ Window Remaining: 15.2s

üõ£Ô∏è Path: LINK ‚Üí WETH ‚Üí USDC

‚è∞ Discovered: 28.05.2025, 10:30:16
```

## üîß Smart Contract (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

```bash
# –î–µ–ø–ª–æ–π –Ω–∞ Polygon
npm run deploy

# –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
npm run interact

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
npm run contract:info
```

### –§—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

- ‚úÖ `getBalance()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `getMultipleBalances()` - –ø–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ `getTokenInfo()` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–∞—Ö
- ‚úÖ `isValidToken()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `emergencyWithdraw()` - —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤

## üìà Production –¥–µ–ø–ª–æ–π

–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∏–¥ –≤ [PRODUCTION.md](PRODUCTION.md)

### Docker –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
npm run docker:build
npm run docker:run

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
npm run docker:logs
```

### PM2 Process Manager

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
pm2 start scripts/trade.js --name "arbitrage-bot"
pm2 save
pm2 startup
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

- `logs/arbitrage_log.txt` - –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- `logs/error_log.txt` - –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `logs/debug_log.txt` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥